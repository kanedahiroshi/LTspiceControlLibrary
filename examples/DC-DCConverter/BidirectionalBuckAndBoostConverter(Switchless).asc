Version 4
SHEET 1 3572 848
WIRE 464 64 448 64
WIRE 592 64 464 64
WIRE 800 64 592 64
WIRE 1024 64 848 64
WIRE 1184 64 1104 64
WIRE 1328 64 1184 64
WIRE 1344 64 1328 64
WIRE 448 112 448 64
WIRE 592 112 592 64
WIRE 800 112 800 64
WIRE 848 112 848 64
WIRE 1184 112 1184 64
WIRE 1344 112 1344 64
WIRE 800 208 800 192
WIRE 848 208 848 192
WIRE 848 208 800 208
WIRE 448 240 448 192
WIRE 592 240 592 176
WIRE 592 240 448 240
WIRE 800 240 800 208
WIRE 800 240 592 240
WIRE 1184 240 1184 176
WIRE 1184 240 800 240
WIRE 1344 240 1344 192
WIRE 1344 240 1184 240
WIRE 448 256 448 240
WIRE 480 432 448 432
WIRE 816 432 480 432
WIRE 896 432 880 432
WIRE 976 432 960 432
WIRE 1056 432 976 432
WIRE 1088 432 1056 432
WIRE 1168 432 1152 432
WIRE 1296 432 1280 432
WIRE 848 480 848 464
WIRE 976 480 976 432
WIRE 1056 480 1040 480
WIRE 1120 480 1120 464
WIRE 1120 480 1056 480
WIRE 448 496 448 432
WIRE 848 496 848 480
FLAG 448 256 0
FLAG 464 64 IN
FLAG 1328 64 OUT
FLAG 448 576 0
FLAG 480 432 i*
FLAG 1056 432 m*_p
FLAG 1056 480 m*_i
FLAG 1296 432 m*
FLAG 848 576 0
FLAG 848 480 i
FLAG 752 176 0
FLAG 752 128 m*
SYMBOL voltage 448 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL ind 1008 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL voltage 448 480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(-1 1 0 5m 5m 25m 50m)
SYMBOL sub 832 464 R0
SYMATTR InstName U1
SYMBOL Integral 992 512 R0
SYMATTR Value T=10m
SYMATTR InstName U3
SYMBOL Proportional 912 464 R0
SYMATTR Value K=10
SYMATTR InstName U2
SYMBOL add 1104 464 R0
SYMATTR InstName U4
SYMBOL voltage 1344 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL bv 848 480 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL cap 1168 112 R0
SYMATTR InstName C2
SYMATTR Value 10u
SYMBOL cap 576 112 R0
SYMATTR InstName C1
SYMATTR Value 10u
SYMBOL LTspiceControlLibrary\\Math\\Functions\\limit 1184 464 R0
SYMATTR Value y=0 z=1
SYMATTR InstName U5
SYMBOL LTspiceControlLibrary\\Sources\\DCTransformer 800 96 R0
SYMATTR InstName U6
TEXT 408 -200 Left 2 !.tran 0 100m 0 startup
TEXT 408 -168 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT 368 328 Left 4 ;Controller
TEXT 440 376 Left 2 ;current controller
TEXT 360 -248 Left 4 ;Config
TEXT 320 -304 Left 5 ;Bidirectional Buck and Boost Converter
TEXT 360 -88 Left 4 ;Circuit
TEXT 888 -168 Left 2 ;NOTE\nSwitching elements are approximated\nby imaginary variable dc transformers.\nThis reduces transient analysis time and\nallows ac analysis.\nDiscontinuous conduction mode and\nnonconduction mode are NOT considered.
