Version 4
SHEET 1 3572 848
WIRE 560 32 432 32
WIRE 752 32 640 32
WIRE 800 32 752 32
WIRE 944 32 864 32
WIRE 1072 32 944 32
WIRE 432 64 432 32
WIRE 752 80 752 32
WIRE 944 80 944 32
WIRE 1072 80 1072 32
WIRE 432 208 432 144
WIRE 752 208 752 160
WIRE 752 208 432 208
WIRE 944 208 944 144
WIRE 944 208 752 208
WIRE 1072 208 1072 160
WIRE 1072 208 944 208
WIRE 432 224 432 208
WIRE 464 432 432 432
WIRE 496 432 464 432
WIRE 656 432 624 432
WIRE 736 432 720 432
WIRE 816 432 736 432
WIRE 848 432 816 432
WIRE 960 432 912 432
WIRE 1056 432 960 432
WIRE 1136 432 1120 432
WIRE 1216 432 1200 432
WIRE 1296 432 1216 432
WIRE 1328 432 1296 432
WIRE 1408 432 1392 432
WIRE 1424 432 1408 432
WIRE 736 480 736 432
WIRE 816 480 800 480
WIRE 880 480 880 464
WIRE 880 480 816 480
WIRE 960 480 944 480
WIRE 976 480 960 480
WIRE 1088 480 1088 464
WIRE 1088 480 1072 480
WIRE 1216 480 1216 432
WIRE 1296 480 1280 480
WIRE 1360 480 1360 464
WIRE 1360 480 1296 480
WIRE 1456 528 1456 464
WIRE 432 544 432 432
WIRE 944 544 944 480
FLAG 432 224 0
FLAG 576 80 X
FLAG 624 80 0
FLAG 432 32 IN
FLAG 1072 32 OUT
FLAG 1488 432 X
FLAG 1456 608 0
FLAG 432 624 0
FLAG 592 528 OUT
FLAG 464 432 v*
FLAG 816 432 il*_p
FLAG 816 480 il*_i
FLAG 960 432 il*
FLAG 1296 432 m*_p
FLAG 1296 480 m*_i
FLAG 1408 432 m*
FLAG 944 624 0
FLAG 960 480 il
SYMBOL voltage 432 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL cap 928 80 R0
SYMATTR InstName C1
SYMATTR Value 100u
SYMBOL diode 864 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL res 1056 64 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL ind 736 64 R0
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL sw 656 32 M270
SYMATTR InstName S1
SYMBOL voltage 432 528 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 -5 0 5m)
SYMBOL sub 576 464 R0
SYMATTR InstName U1
SYMBOL Integral 752 512 R0
SYMATTR Value T=10m
SYMATTR InstName U2
SYMBOL nle 1440 464 R0
SYMATTR InstName U3
SYMBOL Proportional 672 464 R0
SYMATTR Value K=0.1
SYMATTR InstName U4
SYMBOL add 864 464 R0
SYMATTR InstName U5
SYMBOL sub 1072 464 R0
SYMATTR InstName U6
SYMBOL Integral 1232 512 R0
SYMATTR Value T=1m
SYMATTR InstName U7
SYMBOL Proportional 1152 464 R0
SYMATTR Value K=10
SYMATTR InstName U8
SYMBOL add 1344 464 R0
SYMATTR InstName U9
SYMBOL bv 944 528 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL 1stOrderLag 992 512 R0
SYMATTR Value K=1 T=0.1m
SYMATTR InstName U10
SYMBOL TriangleWaveVoltage 1456 512 R0
SYMATTR InstName U11
SYMATTR Value V1=0 V2=1 Tperiod={1/10k} tratio=1
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg 624 512 R270
SYMATTR InstName U12
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg 512 464 R0
SYMATTR InstName U13
TEXT 408 -200 Left 2 !.tran 0 100m 0 startup
TEXT 408 -168 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT 352 328 Left 4 ;Controller
TEXT 360 -248 Left 4 ;Config
TEXT 320 -304 Left 5 ;Buck-Boost Converter
TEXT 360 -88 Left 4 ;Circuit
TEXT 424 376 Left 2 ;voltage controller
TEXT 920 376 Left 2 ;current controller
TEXT 1432 376 Left 2 ;PWM
