Version 4
SHEET 1 3572 848
WIRE 560 32 432 32
WIRE 752 32 640 32
WIRE 800 32 752 32
WIRE 944 32 880 32
WIRE 1072 32 944 32
WIRE 432 64 432 32
WIRE 752 80 752 32
WIRE 944 80 944 32
WIRE 1072 80 1072 32
WIRE 432 208 432 144
WIRE 752 208 752 144
WIRE 752 208 432 208
WIRE 944 208 944 144
WIRE 944 208 752 208
WIRE 1072 208 1072 160
WIRE 1072 208 944 208
WIRE 432 224 432 208
WIRE 1296 384 1264 384
WIRE 1408 384 1392 384
WIRE 464 432 432 432
WIRE 528 432 464 432
WIRE 624 432 592 432
WIRE 736 432 688 432
WIRE 816 432 736 432
WIRE 848 432 816 432
WIRE 928 432 912 432
WIRE 976 432 928 432
WIRE 1072 432 1040 432
WIRE 1104 432 1072 432
WIRE 1200 432 1168 432
WIRE 1296 432 1200 432
WIRE 432 480 432 432
WIRE 1136 480 1136 464
WIRE 1008 496 1008 464
WIRE 1136 496 1136 480
WIRE 1264 496 1264 384
WIRE 736 512 736 432
WIRE 816 512 800 512
WIRE 880 512 880 464
WIRE 880 512 816 512
WIRE 1008 544 1008 496
FLAG 432 224 0
FLAG 576 80 X
FLAG 624 80 0
FLAG 432 32 IN
FLAG 1072 32 OUT
FLAG 1408 384 X
FLAG 432 560 0
FLAG 560 464 OUT
FLAG 464 432 v*
FLAG 816 432 i*_p
FLAG 816 512 i*_i
FLAG 928 432 i*_pi
FLAG 1136 576 0
FLAG 1264 576 0
FLAG 1136 480 i
FLAG 1008 624 0
FLAG 1008 496 i*_slope
FLAG 1072 432 i*
FLAG 1200 432 comp
FLAG 1264 384 clock
SYMBOL voltage 432 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL cap 928 80 R0
SYMATTR InstName C1
SYMATTR Value 10u
SYMBOL diode 768 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL res 1056 64 R0
SYMATTR InstName R1
SYMATTR Value 5
SYMBOL ind 784 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL sw 656 32 M270
SYMATTR InstName S1
SYMBOL voltage 432 464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 0 5m)
SYMBOL sub 544 464 R0
SYMATTR InstName U1
SYMBOL Integral 752 544 R0
SYMATTR Value T=0.1m
SYMATTR InstName U2
SYMBOL Proportional 640 464 R0
SYMATTR InstName U4
SYMATTR Value K=0.1
SYMBOL add 864 464 R0
SYMATTR InstName U5
SYMBOL Digital\\srflop 1344 336 R0
SYMATTR InstName A1
SYMBOL bv 1136 480 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL LTspiceControlLibrary\\Math\\Operands\\lt 1120 464 R0
SYMATTR InstName U3
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub 992 464 R0
SYMATTR InstName U7
SYMBOL voltage 1264 480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 1 0 1n 1n 1n {Tclock})
SYMBOL LTspiceControlLibrary\\Sources\\TriangleWaveVoltage 1008 528 R0
SYMATTR InstName U6
SYMATTR Value V1=0 V2=20m Tperiod={Tclock} tratio=1
TEXT 408 -200 Left 2 !.tran 0 20m 0 startup
TEXT 408 -168 Left 2 !.model SW SW(Ron=.1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT 352 328 Left 4 ;Controller
TEXT 424 376 Left 2 ;voltage controller
TEXT 360 -248 Left 4 ;Config
TEXT 320 -304 Left 5 ;Buck Converter using Current Mode Control
TEXT 360 -88 Left 4 ;Circuit
TEXT 752 624 Left 2 ;slope compensation
TEXT 1032 336 Left 2 ;max current controller
TEXT 1344 528 Left 2 !.param Tclock=100u
