Version 4
SHEET 1 1304 1156
WIRE -2256 -576 -2304 -576
WIRE -2176 -576 -2256 -576
WIRE -2128 -576 -2176 -576
WIRE -1968 -576 -2000 -576
WIRE -1952 -576 -1968 -576
WIRE -1872 -576 -1888 -576
WIRE -1744 -576 -1808 -576
WIRE -1664 -576 -1744 -576
WIRE -1632 -576 -1664 -576
WIRE -1536 -576 -1568 -576
WIRE -2304 -528 -2304 -576
WIRE -2176 -528 -2176 -576
WIRE -2160 -528 -2176 -528
WIRE -2096 -528 -2096 -544
WIRE -1744 -528 -1744 -576
WIRE -1648 -528 -1680 -528
WIRE -1600 -528 -1600 -544
WIRE -1600 -528 -1648 -528
WIRE -1296 -512 -1312 -512
WIRE -1280 -512 -1296 -512
WIRE -1152 -512 -1216 -512
WIRE -1152 -496 -1152 -512
WIRE -1136 -496 -1152 -496
WIRE -1120 -496 -1136 -496
WIRE -944 -496 -992 -496
WIRE -880 -496 -944 -496
WIRE -1536 -480 -1536 -576
WIRE -1504 -480 -1536 -480
WIRE -1472 -480 -1504 -480
WIRE -1392 -480 -1408 -480
WIRE -1312 -480 -1312 -512
WIRE -1312 -480 -1328 -480
WIRE -880 -480 -880 -496
WIRE -1504 -448 -1536 -448
WIRE -1472 -448 -1504 -448
WIRE -1392 -448 -1408 -448
WIRE -1296 -448 -1328 -448
WIRE -1136 -448 -1296 -448
WIRE -1120 -448 -1136 -448
WIRE -1312 -416 -1328 -416
WIRE -2176 -400 -2176 -528
WIRE -1136 -400 -1152 -400
WIRE -1120 -400 -1136 -400
WIRE -976 -400 -992 -400
WIRE -960 -400 -976 -400
WIRE -880 -400 -896 -400
WIRE -1312 -384 -1312 -416
WIRE -1296 -384 -1312 -384
WIRE -1264 -384 -1296 -384
WIRE -1152 -384 -1152 -400
WIRE -1152 -384 -1200 -384
WIRE -2656 -368 -2672 -368
WIRE -2640 -368 -2656 -368
WIRE -2448 -368 -2512 -368
WIRE -2384 -368 -2448 -368
WIRE -2352 -368 -2384 -368
WIRE -2256 -368 -2288 -368
WIRE -2208 -368 -2256 -368
WIRE -2016 -368 -2080 -368
WIRE -2000 -368 -2016 -368
WIRE -1872 -368 -1936 -368
WIRE -1744 -368 -1808 -368
WIRE -1664 -368 -1744 -368
WIRE -1632 -368 -1664 -368
WIRE -1536 -368 -1536 -448
WIRE -1536 -368 -1568 -368
WIRE -976 -336 -976 -400
WIRE -2672 -320 -2672 -368
WIRE -1744 -320 -1744 -368
WIRE -1648 -320 -1680 -320
WIRE -1600 -320 -1600 -336
WIRE -1600 -320 -1648 -320
WIRE -1200 -320 -1216 -320
WIRE -1184 -320 -1200 -320
WIRE -1088 -320 -1120 -320
WIRE -1072 -320 -1072 -384
WIRE -1072 -320 -1088 -320
WIRE -2448 -304 -2448 -368
WIRE -2432 -304 -2448 -304
WIRE -2352 -304 -2368 -304
WIRE -2320 -304 -2320 -336
WIRE -2320 -304 -2352 -304
WIRE -1440 -288 -1440 -400
WIRE -1312 -288 -1440 -288
WIRE -1200 -288 -1312 -288
WIRE -1184 -288 -1200 -288
WIRE -1088 -288 -1120 -288
WIRE -1040 -288 -1040 -384
WIRE -1040 -288 -1088 -288
WIRE -1920 -256 -1920 -544
WIRE -1488 -256 -1920 -256
WIRE -1472 -256 -1488 -256
WIRE -1392 -256 -1408 -256
WIRE -1264 -256 -1328 -256
WIRE -1248 -256 -1248 -496
WIRE -1248 -256 -1264 -256
WIRE -1968 -224 -1968 -336
WIRE -1488 -224 -1968 -224
WIRE -1472 -224 -1488 -224
WIRE -1392 -224 -1408 -224
WIRE -1264 -192 -1328 -192
WIRE -1232 -192 -1232 -368
WIRE -1232 -192 -1264 -192
WIRE -1440 -144 -1440 -176
WIRE -1424 -144 -1440 -144
WIRE -1312 -144 -1312 -288
WIRE -1312 -144 -1360 -144
WIRE -2608 -112 -2608 -336
WIRE -960 -112 -2608 -112
WIRE -928 -112 -928 -384
WIRE -928 -112 -960 -112
FLAG -1264 -256 iu
FLAG -1264 -192 iw
FLAG -1488 -256 ig1
FLAG -1488 -224 id1
FLAG -1968 -576 ig1*
FLAG -1664 -576 vg1*_p
FLAG -1648 -528 vg1*_i
FLAG -2304 -448 0
FLAG -2016 -368 id1*
FLAG -1664 -368 vd1*_p
FLAG -1648 -320 vd1*_i
FLAG -1504 -480 vg1*
FLAG -1504 -448 vd1*
FLAG -1296 -512 vu*
FLAG -1296 -448 vv*
FLAG -1296 -384 vw*
FLAG -976 -336 0
FLAG -960 -112 om
FLAG -944 -496 Tm
FLAG -2656 -368 om*
FLAG -2384 -368 tm*_p
FLAG -2352 -304 tm*_i
FLAG -2672 -240 0
FLAG -2256 -368 tm*
FLAG -1136 -496 U
FLAG -1136 -448 V
FLAG -1136 -400 W
FLAG -1200 -320 f2
FLAG -1200 -288 pf2
FLAG -1088 -320 fa2
FLAG -1088 -288 fb2
FLAG -2256 -576 f2*
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\uw-abTransformation -1328 -304 M0
SYMATTR InstName U2
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\xyRotation -1408 -304 M0
SYMATTR InstName U4
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg -1376 -112 M0
SYMATTR InstName U6
SYMBOL sub -1936 -544 R0
SYMATTR InstName U7
SYMBOL Integral -1728 -496 R0
SYMATTR Value T={Tiig1}
SYMATTR InstName U8
SYMBOL Proportional -1856 -544 R0
SYMATTR Value K={Kpig1}
SYMATTR InstName U10
SYMBOL add -1616 -544 R0
SYMATTR InstName U11
SYMBOL voltage -2304 -544 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 0.5 0 0.1)
SYMBOL sub -1984 -336 R0
SYMATTR InstName U12
SYMBOL Integral -1728 -288 R0
SYMATTR Value T={Tiid1}
SYMATTR InstName U13
SYMBOL Proportional -1856 -336 R0
SYMATTR Value K={Kpid1}
SYMATTR InstName U14
SYMBOL add -1616 -336 R0
SYMATTR InstName U15
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\xyRotation -1472 -528 R0
SYMATTR InstName U16
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\ab-uvwTransformation -1392 -528 R0
SYMATTR InstName U17
SYMBOL voltage -880 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 0.6 0.3)
SYMBOL sub -2624 -336 R0
SYMATTR InstName U5
SYMBOL Integral -2416 -272 R0
SYMATTR InstName U3
SYMATTR Value T={Tiom}
SYMBOL add -2336 -336 R0
SYMATTR InstName U19
SYMBOL Proportional -2128 -336 R0
SYMATTR Value K={L2/(M*Np)}
SYMATTR InstName U20
SYMBOL Proportional -2560 -336 R0
SYMATTR Value K={Kpom}
SYMATTR InstName U24
SYMBOL voltage -2672 -336 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value PULSE(0 150 0.2 0.3)
SYMBOL LTspiceControlLibrary\\Motors\\InductionMotor -992 -448 R0
SYMATTR InstName U1
SYMATTR Value R1={R1} R2={R2} M={M} Ll1={Ll1} Ll2={Ll2} Dm={Dm} Jm={Jm} Np={Np}
SYMBOL LTspiceControlLibrary\\CoordinateTransformations\\xy-rpTransformation -1120 -368 M0
SYMATTR InstName U33
SYMBOL LTspiceControlLibrary\\Math\\Operands\\div -2192 -400 M180
SYMATTR InstName U30
SYMBOL Proportional -2048 -544 R0
SYMATTR Value K={1/M}
SYMATTR InstName U9
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Derivative -2144 -496 R0
SYMATTR Value T={L2/R2}
SYMATTR InstName U18
SYMBOL LTspiceControlLibrary\\Math\\Operands\\add -2112 -544 R0
SYMATTR InstName U25
SYMBOL LTspiceControlLibrary\\Sensors\\CurrentSensor -1248 -512 R0
SYMATTR InstName U26
SYMBOL LTspiceControlLibrary\\Sensors\\CurrentSensor -1232 -384 R0
SYMATTR InstName U27
SYMBOL LTspiceControlLibrary\\Sensors\\CurrentSensor -928 -400 M0
SYMATTR InstName U28
TEXT -1128 -200 Left 2 ;sensor
TEXT -1944 -632 Left 2 ;current controller
TEXT -1528 -632 Left 2 ;coordinate transformation
TEXT -1136 -872 Left 2 !** IM parameters\n.params R1=1 R2=1 M=0.1 Ll1=1m Ll2=1m Dm=10m Jm=10m Np=2\n.params L1=Ll1+M L2=Ll2+M sigma=1-M*M/(L1*L2)
TEXT -1952 -872 Left 2 !** current control parameters\n.params Oci=5000\n.params wi=0.2\n.params Kpig1=sigma*L1*Oci\n.params Tiig1=1/(wi*(1-wi)*Oci)\n.params Kpid1=sigma*L1*Oci\n.params Tiid1=1/(wi*(1-wi)*Oci)
TEXT -2408 -864 Left 2 !** speed control parameters\n.params Ocom=0.1*Oci\n.params wom=0.2\n.params Kpom=Jm*Ocom\n.params Tiom=1/(wom*(1-wom)*Ocom)
TEXT -2688 -472 Left 2 ;speed controller
TEXT -2656 -896 Left 2 !.tran 1.0 startup
TEXT -2696 -936 Left 4 ;Config
TEXT -2736 -992 Left 5 ;IM Direct Vector Control with Magnetic Flux, 2 Currents and Speed Sensing
TEXT -2696 -624 Left 4 ;Control System
TEXT -888 -504 Left 2 ;disturbance torque
TEXT -1088 -760 Left 2 ;Analogy between\nElectric Circuit  - Rotating Machinery\nQ: charge - Pm: angle\nI: current - Om: angular velocity\nV: voltage - Tm: torque\nR: resistance - Dm: viscous resistance\nL: inductance - Jm: moment of inertia\nC: capacitance - Km: torsion coefficient
TEXT -1184 -264 Left 2 ;f: magnetic flux
